<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta content='IE=edge' http-equiv='X-UA-Compatible'>
  <title>Page Title</title>
  <meta content='width=device-width, initial-scale=1' name='viewport'>
  <link href='main.css' media='screen' rel='stylesheet' type='text/css'>
</head>

<body>
  <div class="media-wrap"></div>
  <script src="https://code.jquery.com/jquery-3.1.0.js">
  </script>
  <script>
    function onVideoEnded() {
      next();
    }

    function start() {
      var active = $('.media-wrap .active');
      var isImage = $('.media-wrap .active').find('img').length != 0;
      var isVideo = $('.media-wrap .active').find('video').length != 0;

      // check if image
      if (isImage) {
        setTimeout(function (params) {
          $(active).fadeOut(function () {
            next();
          });
        }, 5000);
      }

      // check if video
      if (isVideo) {
        // play video
        $(active).find('button').click();
      }
    }

    function next() {
      var totalSlides = $('.media-wrap').children().length;
      var activeIndex = $('.media-wrap .active').index();
      var thisSlide = $('.media-wrap').children()[activeIndex];
      var nextSlide = null;

      if (activeIndex + 1 === totalSlides) {
        nextSlide = $('.media-wrap').children()[0];
      } else {
        nextSlide = $('.media-wrap').children()[activeIndex + 1];
      }


      $(thisSlide).removeClass('active').fadeOut(function () {
        $(nextSlide).addClass('active').fadeIn();
      });

      var isImage = $(nextSlide).find('img');

      if (isImage.length) {
        setTimeout(function (params) {
          $(nextSlide).fadeOut(function () {
            next();
          });
        }, 5000);
      } else {
        $(nextSlide).find('button').click();
      }
    }

    $(document).ready(function () {
      var media = [
        {
          type: 'image',
          src: 'media_1.jpg',
        },
        {
          type: 'video',
          src: '2019-07-30_13-03-56.mp4'
        },
        {
          type: 'image',
          src: 'media_2.jpg',
        },
        {
          type: 'video',
          src: '2019-08-17_02-27-34.mp4'
        },
        {
          type: 'video',
          src: 'AT-cm516414208.mp4'
        },
        {
          type: 'image',
          src: 'media_3.jpg',
        }
      ];

      setTimeout(function () {
        media.forEach(function (m, key) {
          if (m.type === 'image') {
            $('.media-wrap').append(`
              <div id="${key}" class="media ${key === 0 ? 'active' : ''}" ${key === 0 ? '' : 'style="display: none"'}>
                <img src="assets/${m.src}" />
              <\/div>
            `);
          }

          if (m.type === 'video') {
            $('.media-wrap').append(`
              <div id="${key}" class="media ${key === 0 ? 'active' : ''}" ${key === 0 ? '' : 'style="display: none"'}>
                <video src="assets/${m.src}" onended="onVideoEnded()"><\/video>
                <button type="button" style="display: none" />
              <\/div>
            `);
          }
        });

        start();
      }, 2000);

      $('body').on('click', '.media-wrap button', function () {
        $(this).parent().find('video').get(0).play();
      });
    });
  </script>
</body>

</html>